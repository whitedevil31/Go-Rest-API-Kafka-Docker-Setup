FROM golang:1.16-alpine
WORKDIR /app

COPY go.mod .
COPY go.sum .
RUN go mod download
ENV MAILER_DOMAIN=YOUR_MAILER_DOMAIN
ENV MAILER_KEY=MAILER_KEY
ENV MAILER_ID=MAILER_ID
ENV SPREADSHEET_ID=GOOGLE_SPREADSHEET_ID
ENV SPREADSHEET_RANGE=RANGE_OF_SPREADSHEET
ENV GROUP_ID=GROUP1
ENV BROKER=kafka:9092
ENV TOPIC=POST_FORM_SUBMIT
COPY . .
RUN go build -mod=mod consumer.go
EXPOSE 5000
CMD ["./consumer"]