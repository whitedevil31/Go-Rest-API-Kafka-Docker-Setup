FROM golang:1.16-alpine
WORKDIR /app

COPY go.mod .
COPY go.sum .
RUN go mod download
ENV MAILER_DOMAIN=
ENV MAILER_KEY=
ENV MAILER_ID=
ENV SPREADSHEET_ID=
ENV SPREADSHEET_RANGE=
ENV GROUP_ID=
ENV BROKER=
ENV TOPIC=
COPY . .
RUN go build -mod=mod consumer.go
EXPOSE 3000
CMD ["./consumer"]